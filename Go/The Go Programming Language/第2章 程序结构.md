# 程序结构

#### 包的初始化

包的初始化首先是解决包级变量的依赖顺序，然后按照包级变量声明出现顺序依次初始化

```go
var a = b + c	// 第三个初始化
var b = f()	// 第二个初始化
var c = 1	// 第一个初始化

func f() int { return c + 1}
```

如果包中含有多个 .go 源文件，将按照发给编译器的顺序进行初始化，go 语言的构建工具首先会将 .go 文件根据文件名排序，然后依次调用编译器编译。

对于在包级别声明的变量，如果有初始化表达式则用表达式初始化，若有一些没有初始化表达式的，可以用一个特殊的 init 初始化函数来简化初始化工作。每个文件都可以包含多个 init 初始化函数。init 初始化函数不能被调用或引用

```go
func init() { /* .... */ }
```

每个包在解决依赖的前提下，已导入声明的顺序初始化，每个包只会被初始化一次。因此一个 p 包导入 q 包，则 p 包初始化时可以认为 q 包必然已经初始化过了。初始化工作时自上而下进行，main 包最后被初始化。

#### 作用域

声明语句对应的词法域决定了作用域范围的大小。任何在函数外部声明的名字可以在同一个包的任何源文件中访问。对于导入的包，则是对应源文件级的作用域。