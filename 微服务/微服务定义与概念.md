### 微服务定义

围绕业务功能构建，服务关注单一业务，服务间采用轻量级的通信机制，可以全自动独立部署，可以使用不同的编程语言和数据存储技术。微服务架构通过业务拆分实现服务组件化，通过组件组合快速开发系统，业务单一的服务组件又可以独立部署，使得整个系统变的清晰。

- 原子服务
- 独立进程
- 隔离部署
- 去中心化服务治理

缺点：

- 基础设施建设、复杂度高

### 微服务不足

- 微服务是分布式系统，会带来很大的复杂性。开发者不得不使用RPC或者消息传递，来实现进程间通信。必须要写代码来处理消息传递中速度过慢或者服务不可用等局部失效问题。
- 分区的数据库架构，同时更新多个业务主体的事务很普遍。在单体式应用中很容易，因为只有一个数据库。在微服务架构应用中，需要更新不同服务所使用的的不同数据库，从而对开发者提出了更高的要求和挑战。
- 测试微服务架构的应用也很复杂。
- 服务模块间的依赖，应用升级有可能涉及多个服务模块的修改。
- 对运维基础设施的挑战比较大。

### 服务组件化

### 按业务组织服务

### 去中心化

- 数据去中心化
- 治理去中心化
- 技术去中心化

### 可用性 & 兼容性

- 隔离
- 超时控制
- 负载保护
- 限流
- 降级
- 重试
- 负载均衡

### API Gateway

- 轻量交互：协议精简、聚合
- 差异服务：数据裁剪以及聚合
- 动态升级：原有系统兼容升级，更新服务而非协议
- 效率提升

### 服务发现

客户端发现：

> 直连，比服务端服务发现少一次网络跳转，consumer需要内置特定的服务发现客户端和发现逻辑。

服务端发现：

> consumer 无需关注服务发现具体细节，只需知道服务的DNS域名即可，支持多语言开发，需要基础设施支撑，多了一次网络跳转，可能有性能损失。