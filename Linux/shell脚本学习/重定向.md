### 重定向

> 标准输入 = /dev/stdin = 0 = <
>
> 标准输出 = /dev/stdout = 1 = > 或 >>
>
> 标准错误输出 = /dev/stderr = 2 = 2> 或 2>>

**重定向操作时 shell 最先解析到，在执行命令之前，重定向就会打开文件以确定输入、输出的位置。如果是重定向输出操作，则先截断文件使其为空，即使是追加重定向也是如此。**

**/dev/stdin、/dev/stdout、/dev/stderr 等设备只是数据默认的流向目标（严格地说是文件描述符0、1、2的输出目标），它们不等价于标准输入0、标准输出1、标准错误2。之所以称为重定向，就是将数据的流向改变，不再输入到这些默认设备中。**

**重定向的顺序很重要**

例：

`ls / >file1 2>&1` 表示先打开 file1 作为标准输出的目的地，然后再将标准错误绑定到标准输出（已经是 file1 ）上，这样无论是标准错误还是标准输出都重定向到 file1 中。等价于 `ls / &>file1` “&” 符号表示描述符重用，可以理解为 **将文件描述符2绑定到文件描述符1上，或者文件描述符2重用文件描述符1即可。**

`ls / 2>&1 >file1` 表示先将标准错误绑定到标准输出，此时标准输出还是 /dev/stdout（屏幕），因此标准错误的输出目标是 /dev/stdout 。之后再打开 file1 作为标准输出的目标。因此，最终将标准错误重定向到 /dev/stdout ，将标准输出重定向到 file1.

快速清空文件的方法：

- `> ab.sh`
- `: > ab.sh`
- `echo '' > ab.sh`
- `truncate -s 0 ab.sh`
- `dd if=/dev/null of=ab.sh`

### cat 和重定向

`cat <<eof>log.txt` 或 `cat >log.txt <<eof`：覆盖的方式输入到 log.txt

`cat <<eof>>log.txt` 或 `cat >>log.txt <<eof` ：追加的方式输入到 log.txt



tee 双重定向 ：可以既输出到屏幕上又可以输出到文件内



### << 和 <<<

<< ：here document

<<< ：here string，表示将字符串作为输入数据