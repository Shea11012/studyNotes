## iptables

iptables 服务把用于处理或过滤流量的策略条目称为规则，多条规则可以组成一个规则链，规则链则依据数据包处理位置的不同进行分类：

- PREROUTING：在进行路由选择前处理数据包
- INPUT：处理流入的数据包
- OUTPUT：处理流出的数据包
- FORWARD：处理转发的数据包
- POSTROUTING：在进行路由选择后处理数据包

拒绝动作：

- ACCEPT：允许流量通过
- REJECT：拒绝流量通过，有响应
- LOG：记录日志信息
- DROP：丢弃流量，无响应

**iptables 常用参数**

| 参数        | 作用                             |
| ----------- | -------------------------------- |
| -P          | 设置默认策略                     |
| -F          | 清空规则链                       |
| -L          | 查看规则链                       |
| -A          | 在规则链末尾添加新规则           |
| -I num      | 在规则链头部添加新规则           |
| -D num      | 删除某一条规则                   |
| -s          | 匹配来源地址 IP/MASK，！表示取反 |
| -d          | 匹配目标地址                     |
| -i 网卡名称 | 匹配从这块网卡流入的数据         |
| -o 网卡名称 | 匹配从这块网卡流出的数据         |
| -p          | 匹配协议，TCP、UDP、ICMP等       |
| --dport num | 匹配目标端口号                   |
| --sport num | 匹配来源端口号                   |



## firewalld

区域的概念：是 firewalld 预先准备了几套防火墙策略集合，可以根据生产场景不同而选择合适的策略集合，从而实现防火墙策略的快速切换。 

firewalld 常用区域名称及策略规则：

| 区域     | 默认规则                             |
| -------- | ------------------------------------ |
| trusted  | 允许所有数据包                       |
| home     | 拒绝流入的流量，除非与流出流量相关   |
| internal | 等同于 home 区域                     |
| work     | 拒绝流入的流量，除非与流出流量相关   |
| public   | 拒绝流入的流量，除非与流出的流量相关 |
| external | 拒绝流入的流量，除非与流出的流量相关 |
| dmz      | 拒绝流入的流量，除非与流出的流量先关 |
| block    | 拒绝流入的流量，除非与流出的流量先关 |
| drop     | 拒绝流入的流量，除非与流出的流量先关 |



