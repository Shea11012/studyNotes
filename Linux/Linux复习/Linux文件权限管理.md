### 文件/目录的权限

#### 文件的权限

#### linux文件权限

r —— 4

w —— 2

x —— 1

创建文件默认权限：-rw-r-r

目录默认权限：drwx-r-x-r-x

链接文件默认权限 lrwxrwxrwx

umask指定文件与目录默认权限，默认0022（去掉了w权限）

```
[-][rwx][r-x][r--][1][root][root][238][Jun 18 17:22][test.txt]
 1	2	 3	  4	  5	   6	7	  8	  		9		  10
```

1：`[-]`代表文件，`[d]`代表目录，`[l]`代表链接文件，`[b]`代表设备文件里可供存储的接口设备，`[c]`表示设备文件的串行端口设备，例如键盘、鼠标

2：拥有者权限

3：同用户组用户权限

4：其他用户权限

5：表示有多少文件名连接到此节点

6：表示这个文件或目录的所有者账号

7：表示这个文件的所属用户组

8：表示这个文件的容量大小

9：表示这个文件的创建日期或者最近的修改日期

10：表示文件名



chmod ： 修改权限，能够修改权限的人只有文件所有者和超级管理员

chgrp ：更改文件和目录的所属组，要求组已存在，对于链接文件，修改组的作用对象是链接的源文件，而非链接文件本身

chown ： 修改文件所有者和所属组，对于链接文件而言，默认不会穿过链接修改源文件，而是直接修改链接文件本身

umask ：用于设置用户在创建文件时的默认权限，对于 root 用户（UID 小于 200 的 user，默认的 umask 值是 022），对于普通用户和系统用户，系统默认的 umask 值是 002，默认设置是写在 /etc/profile 和 /etc/bashrc 环境配置文件中

### 文件扩展 ACL 权限

在计算机相关领域，所有的 ACL （access control list）都表示访问控制列表

扩展 ACL 可以针对单一使用者，单一档案或目录里的默认权限进行 r，w，x 的权限规范

查看文件系统是否开启 ACL 功能 ：`dumpe2fs -h /dev/sda2 | grep -i acl`

setfacl ：设置 ACL

getfacl ：查看 ACL

ACL:mask ：设置 mask 后会将 mask 权限与已有的 acl 权限进行计算

#### 文件隐藏属性

chattr ：改变文件隐藏属性

lsattr ： 查看文件隐藏属性

#### 文件特殊权限

SUID ：只针对可执行文件，即二进制文件，作用是对某个命令（可执行文件）授予所有者权限，命令执行完成权限就消失，“s” 表示 SUID ，SUID 必须和 x 配合，如果没有 x 则 SUID 是空 SUID ,仍然没有执行命令权限，空的 SUID 权限使用大写的 “S” 表示，数字4代表 SUID ，如 4755

SGID ：针对二进制文件和目录

- 针对二进制文件时，权限升级为命令的所属组权限
- 针对目录时，目录所建立的文件或子目录的组将继承默认父目录组，本质还是提升目录所属组的权限，此时目录需要具有 rx 权限，普通用户才能进入目录，如果普通用户具有 w 权限，新建的文件和目录则以父目录组为默认组

SBIT ：只对目录有效，对目录设置 sbit ，将使得目录里的文件只有所有者能删除，即使其他用户在此目录有 rwx 权限，即使是 root 用户

TIPS ： suid/sgid/sbit 的标志位都作用在 x 位，有权限则是 s/s/t ，没有权限则是 S/S/T



