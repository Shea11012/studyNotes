### 进程结构

##### 进程控制块 PCB

- 进程描述信息
- 进程控制和管理信息
- 资源分配清单
- 处理机相关信息

##### 程序段

- 存放要执行代码

##### 数据段

- 存放程序运行过程中处理的各种数据

##### PCB作用

- 作为独立运行基本单位的标志。系统是通过PCB感知进程存在。
- 能实现间断性运行的方式。程序是走走停停，间断运行。当程序移交CPU时必须保留现场，调用时要恢复现场，PCB中保留了中断程序的现场信息UCOS。
- PCB中提供了进程的状态信息，还有其他信息如（进程优先级，进程的等待时间，以及执行时间）
- 与其他进程的同步与信息，如信号量机制。

### 线程

线程的结构是也是一个PCB

线程的创建与销毁都消耗CPU资源

##### 共享数据

> 进程代码段
>
> 进程的共有数据（利用共享数据，线程可以实现相互之间的通讯）
>
> 进程的打开的文件描述符
>
> 信号的处理器
>
> 进程当前目录和进程用户ID与进程组ID

##### 私有数据

> 线程ID
>
> 寄存器组的值
>
> 线程的栈
>
> 错误返回码 errno 值
>
> 线程的信号屏蔽码
>
> 线程的优先级

### 线程与进程的区别

- 资源分配：资源分配基本单位是进程，线程是调度的基本单位
- 进程与进程之间是独立的，**一个进程的异常终止不会影响其它进程**，而线程与线程之间大部分是共享的，**一个线程的异常终止会影响其它线程，会使进程终止。**
- 线程与线程大部分共享，也有一部分私有数据：线程ID、上下文、独享一个栈空间、错误码、信号屏蔽字、调度优先级
- 调度和切换：线程的上下文切换比进程上下文切换要快的多。
- 线程比进程占用的资源要小，线程的创建远小于进程的创建
- 线程之间资源共享，需要使用锁。
- 线程创建出来的线程是平等的，**进程的创建出的进程是该进程的子进程**